#!/bin/bash -e
# Create Jest test
[ $# -lt 1 ] && cat <<EOS >&2 && exit 1
$0 [...COMPONENT_PATHS]
EOS

for COMPONENT_PATH in "$@"; do
  DIR="$(dirname "$COMPONENT_PATH")/__tests__"
  COMPONENT_NAME=$(basename "$COMPONENT_PATH")

  [ ! -e "$DIR" ] && mkdir -p "$DIR"

  cat <<EOS | sed "s/{{componentName}}/$COMPONENT_NAME/g" > "$DIR/$COMPONENT_NAME.test.js"
import React from 'react';
import { shallow } from 'enzyme';
import {{componentName}} from '../{{componentName}}';

test('renders', () => {
  const wrapper = shallow(<{{componentName}} />);

  expect(wrapper).toBeDefined();
});
EOS
done
